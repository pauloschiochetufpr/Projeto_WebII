<div
  class="p-6 my-8 max-w-3xl mx-auto shadow-2xl rounded-xl bg-white border border-gray-100"
>
  <div
    class="mb-8 flex items-center justify-between border-b-2 border-gray-200 pb-4"
  >
    <div>
      <h2
        class="text-3xl font-bold text-azul-main font-sansation mb-1 select-none"
      >
        Solicitação de Manutenção
      </h2>
      <p class="text-gray-500 font-sansation select-none">
        Preencha o formulário abaixo para solicitar nossa manutenção.
      </p>
    </div>

    <button
      (click)="goBack()"
      class="font-semibold font-sansation text-white px-6 py-2 rounded-lg bg-roxo-terc hover:shadow-inner hover:shadow-gray-600 transition-shadow ease-in-out duration-300 select-none"
    >
      Voltar
    </button>
  </div>

  <div
    *ngIf="success"
    class="mb-6 p-4 bg-verde-sec/10 border border-verde-sec/50 rounded-lg"
  >
    <p class="text-verde-sec font-medium font-sansation select-none">
      ✓ {{ success }}
    </p>
  </div>

  <div
    *ngIf="error"
    class="mb-6 p-4 bg-red-50 border border-red-300 rounded-lg"
  >
    <p class="text-red-800 font-medium font-sansation select-none">
      ✗ {{ error }}
    </p>
  </div>

  <!-- FORMULÁRIO -->
  <form
    #form="ngForm"
    (ngSubmit)="onSubmit()"
    class="bg-gray-50 border rounded-lg p-8 shadow-inner"
  >
    <!-- Descrição Equipamento -->
    <div class="mb-4">
      <label
        class="block text-sm font-semibold text-azul-main font-sansation mb-2"
        >Descrição do Equipamento *</label
      >
      <input
        type="text"
        name="descricaoEquipamento"
        [(ngModel)]="formData.descricaoEquipamento"
        required
        minlength="5"
        maxlength="100"
        class="w-full px-4 py-2 border-2 border-azul-main/50 rounded-md font-sansation text-slate-800 focus:border-verde-sec outline-none"
      />
    </div>

    <!-- Categoria -->
    <div class="mb-4">
      <label
        class="block text-sm font-semibold text-azul-main font-sansation mb-2"
        >Categoria do Equipamento *</label
      >

      <select
        name="categoriaEquipamento"
        [(ngModel)]="formData.categoriaEquipamento"
        required
        class="w-full px-4 py-2 border-2 border-azul-main/50 rounded-md font-sansation bg-white text-slate-800 focus:border-verde-sec outline-none"
      >
        <option [ngValue]="null">Selecione uma categoria</option>
        <option *ngFor="let c of categorias" [ngValue]="c.id">
          {{ c.nome }}
        </option>
      </select>
    </div>

    <!-- Defeito -->
    <div class="mb-6">
      <label
        class="block text-sm font-semibold text-azul-main font-sansation mb-2"
        >Descrição do Defeito *</label
      >
      <textarea
        name="descricaoDefeito"
        [(ngModel)]="formData.descricaoDefeito"
        required
        minlength="10"
        maxlength="500"
        rows="4"
        class="w-full px-4 py-2 border-2 border-azul-main/50 rounded-md font-sansation resize-none focus:border-verde-sec outline-none"
      ></textarea>
    </div>

    <div class="flex justify-end">
      <button
        type="submit"
        [disabled]="loading"
        class="font-semibold font-sansation py-2 px-8 rounded-lg transition duration-300 shadow-md flex items-center bg-verde-sec hover:bg-verde-sec/90 text-azul-main disabled:bg-gray-300 disabled:text-gray-500"
      >
        <span *ngIf="loading" class="mr-2 animate-spin">⟳</span>
        {{ loading ? "Enviando..." : "Solicitar Manutenção" }}
      </button>
    </div>
  </form>
</div>
